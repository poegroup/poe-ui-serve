#!/usr/bin/env node

var program = require('commander');

// usage

program
  .version(require('../package').version)
  .usage('[path]')
  .parse(process.argv);

/**
 * Module dependencies
 */

var spawn = require('win-fork');
var path = require('path');
var join = path.join;
var resolve = path.resolve;

var servePath = process.env.POE_SERVE_PATH = join(process.cwd(), (program.args[0] || ''));

var makePath = resolve(__dirname + '/..');

process.chdir(makePath);

var proc = spawn('make', [], { stdio: 'inherit', customFds: [0, 1, 2] });

proc.on('close', function(code){
  process.exit(code);
});
